// ğŸ¯ TensorLogic Knowledge Graph Demo
// Integrates all implemented features: Phase 4-10

// ============================================================================
// Phase 4: å‹ä»˜ãEntityå®£è¨€
// ============================================================================
entity Person
entity City
entity Item

// ============================================================================
// Phase 4: å‹ä»˜ãé–¢ä¿‚å®£è¨€
// ============================================================================
relation lives_in(person: Person, city: City)
relation owns(person: Person, item: Item)
relation friend_of(person1: Person, person2: Person)

// ============================================================================
// Phase 7: Entity Embeddingï¼ˆå­¦ç¿’å¯èƒ½ãªå¯†ãƒ™ã‚¯ãƒˆãƒ«è¡¨ç¾ï¼‰
// ============================================================================
embedding PersonEmbed {
    entities: {alice, bob, charlie, david}
    dimension: 16
    init: xavier
}

embedding CityEmbed {
    entities: {tokyo, osaka, kyoto, fukuoka}
    dimension: 8
    init: he
}

embedding ItemEmbed {
    entities: {book, laptop, phone, camera}
    dimension: 8
    init: random
}

main {
    print("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
    print("â•‘  TensorLogic Knowledge Graph Demo                â•‘")
    print("â•‘  çµ±åˆæ©Ÿèƒ½: Phase 4-10                             â•‘")
    print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    print("")

    // ========================================================================
    // Phase 10: ã‚·ãƒ³ãƒœãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒ•ã‚¡ã‚¯ãƒˆè¿½åŠ ï¼ˆã‚¯ã‚©ãƒ¼ãƒˆä¸è¦ï¼ï¼‰
    // ========================================================================
    print("ğŸ“ Adding facts (symbol-based syntax)...")

    lives_in(alice, tokyo)
    lives_in(bob, osaka)
    lives_in(charlie, kyoto)
    lives_in(david, fukuoka)

    owns(alice, book)
    owns(alice, laptop)
    owns(bob, phone)
    owns(charlie, camera)

    friend_of(alice, bob)
    friend_of(bob, charlie)
    friend_of(charlie, david)

    print("   âœ“ 11 facts added")
    print("")

    // ========================================================================
    // Phase 5: ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£è¡¨ç¤ºï¼ˆwith-blockï¼‰
    // ========================================================================
    print("ğŸ‘¥ Entity Collections:")
    print("")

    with Person {
        print("People in knowledge graph:")
    }
    print("")

    with City {
        print("Cities in knowledge graph:")
    }
    print("")

    // ========================================================================
    // Phase 8: ãƒ¡ã‚¿ã‚¿ã‚¤ãƒ—ï¼ˆå‹ã‚’å€¤ã¨ã—ã¦æ‰±ã†ï¼‰
    // ========================================================================
    print("ğŸ”¢ Type Dimensions (meta-type system):")
    let person_dim = entity_dim(Person)
    let city_dim = entity_dim(City)
    let item_dim = entity_dim(Item)

    print("   Person dimension:", person_dim)
    print("   City dimension:", city_dim)
    print("   Item dimension:", item_dim)
    print("")

    // ========================================================================
    // Phase 6: One-hotå¤‰æ›ï¼ˆé›¢æ•£è¡¨ç¾ï¼‰
    // ========================================================================
    print("ğŸ² One-hot Encodings (discrete representation):")
    let alice_onehot = entity_onehot(Person, alice)
    print("   alice one-hot:", alice_onehot)

    let tokyo_onehot = entity_onehot(City, tokyo)
    print("   tokyo one-hot:", tokyo_onehot)
    print("")

    // ========================================================================
    // Phase 9: Embedding Lookupï¼ˆå¯†ãªå­¦ç¿’å¯èƒ½è¡¨ç¾ï¼‰
    // ========================================================================
    print("ğŸ§  Entity Embeddings (dense learned representations):")
    let alice_emb = PersonEmbed[alice]
    print("   alice embedding (16-dim):", alice_emb)

    let bob_emb = PersonEmbed[bob]
    print("   bob embedding (16-dim):", bob_emb)

    let tokyo_emb = CityEmbed[tokyo]
    print("   tokyo embedding (8-dim):", tokyo_emb)

    let book_emb = ItemEmbed[book]
    print("   book embedding (8-dim):", book_emb)
    print("")

    // ========================================================================
    // çµ±åˆ: ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’ä½¿ã£ãŸã‚¯ã‚¨ãƒªä¾‹
    // ========================================================================
    print("ğŸ” Integrated Query Example:")
    print("   Who lives in tokyo?")
    with Person {
        lives_in(alice, tokyo)?
    }
    print("")

    print("   What does alice own?")
    with Item {
        owns(alice, book)?
        owns(alice, laptop)?
    }
    print("")

    // ========================================================================
    // ã¾ã¨ã‚
    // ========================================================================
    print("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
    print("â•‘  âœ… Demo Completed!                              â•‘")
    print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    print("")
    print("å®Ÿè£…ã•ã‚ŒãŸæ©Ÿèƒ½:")
    print("  âœ“ Phase 4: å‹ä»˜ãEntityå®£è¨€")
    print("  âœ“ Phase 5: ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£è¡¨ç¤ºï¼ˆwith-blockï¼‰")
    print("  âœ“ Phase 6: Entity-Tensorå¤‰æ›ï¼ˆentity_onehotï¼‰")
    print("  âœ“ Phase 7: Entity Embeddingï¼ˆå­¦ç¿’å¯èƒ½ãªåŸ‹ã‚è¾¼ã¿ï¼‰")
    print("  âœ“ Phase 8: ãƒ¡ã‚¿ã‚¿ã‚¤ãƒ—ã‚·ã‚¹ãƒ†ãƒ ï¼ˆå‹ã‚’å€¤ã¨ã—ã¦ï¼‰")
    print("  âœ“ Phase 9: Embedding Lookupï¼ˆå¯†è¡¨ç¾ã®å–å¾—ï¼‰")
    print("  âœ“ Phase 10: ã‚·ãƒ³ãƒœãƒ«ãƒ™ãƒ¼ã‚¹å‚ç…§ï¼ˆçµ±ä¸€æ§‹æ–‡ï¼‰")
    print("")
    print("æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:")
    print("  â€¢ çŸ¥è­˜ã‚°ãƒ©ãƒ•åŸ‹ã‚è¾¼ã¿ã®å­¦ç¿’ï¼ˆTransE, DistMultç­‰ï¼‰")
    print("  â€¢ ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³äºˆæ¸¬")
    print("  â€¢ ã‚°ãƒ©ãƒ•ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¨ã®çµ±åˆ")
}
